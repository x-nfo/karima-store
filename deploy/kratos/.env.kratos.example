# Ory Kratos Production Environment Variables
# Copy this file to .env.kratos and fill in the actual values
# DO NOT commit .env.kratos to version control!

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL DSN connection string for Kratos
# Format: postgresql://user:password@host:port/database?sslmode=require
# Example: postgresql://kratos:secure_password@localhost:5432/kratos?sslmode=require
KRATOS_DSN=postgresql://kratos:CHANGE_ME_PASSWORD@localhost:5432/kratos?sslmode=require

# ============================================================================
# URL CONFIGURATION
# ============================================================================
# Public base URL for Kratos API (accessible by users)
KRATOS_PUBLIC_BASE_URL=https://auth.ks-backend.cloud/

# Admin base URL for Kratos API (internal/admin use only)
# In production, this should be accessible only within your private network
KRATOS_ADMIN_BASE_URL=http://127.0.0.1:4434/

# UI base URL for your frontend application
KRATOS_UI_URL=https://karimasyari.com

# Default browser return URL after authentication flows
KRATOS_DEFAULT_RETURN_URL=https://karimasyari.com/

# ============================================================================
# SECURITY SECRETS (CRITICAL - CHANGE THESE!)
# ============================================================================
# Secret for cookie signing (minimum 32 characters, use strong random string)
# Generate with: openssl rand -base64 32
KRATOS_SECRET_COOKIE=CHANGE_ME_COOKIE_SECRET_MIN_32_CHARS_LONG_AND_RANDOM

# Secret for cipher encryption (must be exactly 32 characters)
# Generate with: openssl rand -base64 32 | cut -c1-32
KRATOS_SECRET_CIPHER=CHANGE_ME_32_CHAR_CIPHER_SECRET_NOW

# ============================================================================
# COOKIE SECURITY CONFIGURATION
# ============================================================================
# Domain for cookies (leave empty for current domain)
# For production, set to your root domain: .karimasyari.com
KRATOS_COOKIE_DOMAIN=

# SameSite cookie policy: Lax, Strict, or None
# - Lax: Allows cookies to be sent with top-level navigations (recommended for most apps)
# - Strict: Cookies only sent for same-site requests (most secure)
# - None: Cookies sent with cross-site requests (requires secure: true)
KRATOS_COOKIE_SAME_SITE=Lax

# Secure cookies (only send over HTTPS)
# Production recommendation: true
KRATOS_COOKIE_SECURE=true

# HttpOnly cookies (prevent JavaScript access)
# Production recommendation: true
KRATOS_COOKIE_HTTP_ONLY=true

# ============================================================================
# SESSION CONFIGURATION
# ============================================================================
# Session lifespan (duration before session expires)
# Format: 24h, 12h, 1h, etc.
KRATOS_SESSION_LIFESPAN=24h

# Session cookie name (default: ory_kratos_session)
KRATOS_SESSION_COOKIE_NAME=ory_kratos_session

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================
# Log level: trace, debug, info, warning, error, fatal, panic
# Production recommendation: info or warning
KRATOS_LOG_LEVEL=info

# Log format: json or text
# Production recommendation: json (easier for log aggregation)
KRATOS_LOG_FORMAT=json

# Whether to leak sensitive values in logs
# Production recommendation: false (security best practice)
KRATOS_LEAK_SENSITIVE_VALUES=false

# ============================================================================
# EMAIL CONFIGURATION (SMTP)
# ============================================================================
# SMTP connection URI for sending emails (verification, recovery, etc.)
# Format: smtps://user:password@host:port/?skip_ssl_verify=false
# Example with Gmail: smtps://your-email@gmail.com:app-password@smtp.gmail.com:465/?skip_ssl_verify=false
# Example with SendGrid: smtps://apikey:SG.API_KEY@smtp.sendgrid.net:465/?skip_ssl_verify=false
KRATOS_SMTP_CONNECTION_URI=smtps://username:password@smtp.example.com:465/?skip_ssl_verify=false

# ============================================================================
# FEATURE FLAGS
# ============================================================================
# Enable continue-with transitions (experimental feature)
KRATOS_USE_CONTINUE_WITH=false

# Authentication Assurance Level (AAL) settings
# AA1: Single factor authentication (password only)
KRATOS_AAL_AA1_ENABLED=true

# AA2: Multi-factor authentication (password + TOTP/other)
# Set to true if you want to enable 2FA
KRATOS_AAL_AA2_ENABLED=false

# ============================================================================
# OPTIONAL: ADDITIONAL CONFIGURATION
# ============================================================================
# If you need to override any other settings, you can add them here
# and reference them in kratos.yml using ${VARIABLE_NAME} syntax
